:80 {
    log {
  	output file /var/log/caddy/access.log
	output stdout
	format console
    }

    root * /srv

    handle /text {
        respond "{http.request.header.X-Forwarded-For}" 200
	header Content-Type text/plain
    }

    handle /json {
        respond `{ "ip": "{http.request.header.X-Forwarded-For}" }` 200 
        header Content-Type application/json
    }

    file_server
}
